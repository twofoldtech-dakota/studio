{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://studio.plugin/schemas/config.schema.json",
  "title": "STUDIO Configuration",
  "description": "Project-level STUDIO configuration created by /init command",
  "type": "object",
  "required": ["version", "studio_version", "created_at", "settings"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Configuration schema version (semver)"
    },
    "studio_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "STUDIO plugin version that created this config"
    },
    "project_name": {
      "type": "string",
      "description": "Name of the project (detected or user-specified)"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when STUDIO was initialized"
    },
    "initialized_by": {
      "type": "string",
      "enum": ["studio-init", "studio-init-interactive"],
      "description": "How initialization was performed"
    },
    "settings": {
      "type": "object",
      "description": "STUDIO behavior settings",
      "properties": {
        "checkpoint_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether to create checkpoints during building"
        },
        "verifying_required": {
          "type": "boolean",
          "default": true,
          "description": "Whether verifying is mandatory before task completion"
        },
        "max_replan_attempts": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "default": 3,
          "description": "Maximum number of replanning attempts during building"
        },
        "auto_memory_learning": {
          "type": "boolean",
          "default": true,
          "description": "Whether to prompt for Memory learning on corrections"
        },
        "verbose_output": {
          "type": "boolean",
          "default": false,
          "description": "Whether to show detailed output during task execution"
        }
      }
    },
    "domains": {
      "type": "object",
      "description": "Domain configuration for Memory rules",
      "properties": {
        "enabled": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["global", "frontend", "backend", "testing", "security", "devops"]
          },
          "description": "List of enabled domain rule files"
        },
        "auto_detect": {
          "type": "boolean",
          "default": true,
          "description": "Whether to auto-detect relevant domains from goals"
        }
      }
    },
    "task_retention": {
      "type": "object",
      "description": "Task history retention settings",
      "properties": {
        "keep_completed_days": {
          "type": "integer",
          "minimum": 1,
          "default": 7,
          "description": "Days to keep completed task data"
        },
        "keep_failed_days": {
          "type": "integer",
          "minimum": 1,
          "default": 30,
          "description": "Days to keep failed/aborted task data"
        },
        "auto_cleanup": {
          "type": "boolean",
          "default": false,
          "description": "Whether to automatically clean up old tasks"
        }
      }
    }
  }
}
